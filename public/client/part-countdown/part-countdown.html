<dom-module id="part-countdown">
  <template>
  <style type="text/css">
  .timer{
    padding-left:5em
  }
  </style>

  <template is="dom-if" if="{{dateString}}">
    <span class="timer">  start in:{{dateString}}</span>
  </template>  

  </template>
</dom-module>
<script>

  Polymer({

    is: 'part-countdown',

    properties: {
      difference:{
        type: Number,
        value: 0
      },
      count:{
        type: Number,
        value: 0
      },
    },
      
    attached: function() {
      var now = new Date();
      var date = new Date(this.webinar.data);
      this.difference = (date.getTime() + date.getTimezoneOffset()*60*1000 ) - now.getTime();
      if(this.difference > 0){
        this.count = this.difference;
        this.start();
      }

    },
    start: function() {
      var self = this;
      function countDown() {
          self.count -= 1000;
          if (self.count > 0) {
              setTimeout(countDown, 1000);
              date_expired = new Date(self.count - 60*60*1000);
              self.dateString = date_expired.toLocaleTimeString();
          } else {
              self.fire('core-countdown-ended');
          }
      };
      countDown();
    },

  });
</script>