<link rel="import" href="../../components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../styles/style-grid/style-grid.html">
<link rel="import" href="../../styles/style-navs/style-navs.html">
<link rel="import" href="../x-tabs/x-tabs.html">
<link rel="import" href="../x-tabs/x-tabs-nav.html">
<link rel="import" href="../deck-reviews/deck-reviews.html">

<dom-module id="page-teacher">
  <template>
    <style include="style-grid"></style>
    <style include="style-navs"></style>
    <style>
      .general {
        @apply(--layout-horizontal);
        margin-bottom: 50px;
      }
      .general .image iron-image {
        width: 150px;
        height: 150px;
      }
      .general .info {
        flex: 1;
        padding-left: 20px;
      }
    </style>

    <layout-client>
      <div class="container">
        <div class="general">
            <div class="image">
              <iron-image preload src="{{data.manager.photo}}" sizing="cover"></iron-image> 
            </div>
            <div class="info">
              <h2 class="name">{{data.manager.fullname}}</h2>
              <h4 class="text">{{data.manager.email}}</h4>
            </div>
        </div>

        <div class="details">
          <x-tabs-nav tabs='["teaching", "reviews"]' current="{{current}}"></x-tabs-nav>
          <x-tabs id="tabs" current="{{current}}">
            <div tab name="teaching">
              <deck-courses courses="{{data.manager.teaching}}" on-select="on_select"></deck-courses>
            </div>
            <div tab name="reviews">
              <template is="dom-repeat" items="{{data.manager.teaching}}" as="course">
                <deck-reviews reviews="{{course.review}}"></deck-reviews>
              </template>
            </div>
          </x-tabs>
        </div>
      </div>
    </layout-client>

  </template>
</dom-module>

<script>
  Polymer({

    is: 'page-teacher',

    on_select:function(event){
      page('/courses/' + event.detail.id)
    }

  });
</script>