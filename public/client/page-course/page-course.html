<link rel="import" href="part-course-overview.html">
<link rel="import" href="part-course-documents.html">
<link rel="import" href="part-course-header.html">
<link rel="import" href="part-course-lectures.html">
<link rel="import" href="part-course-reviews.html">
<link rel="import" href="part-course-webinars.html">
<link rel="import" href="part-course-other-course.html">
<link rel="import" href="../page-payment/page-payment.html">
<link rel="import" href="../deck-video/deck-video.html">
<link rel="import" href="../layout-client/layout-client.html">
<link rel="import" href="../x-tabs/x-tabs.html">
<link rel="import" href="../x-tabs/x-tabs-nav.html">
<link rel="import" href="../../components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../styles/style-button/style-button.html">
<link rel="import" href="../../styles/style-navs/style-navs.html">

<dom-module id="page-course">
  <template>
    <style include="style-grid"></style>
    <style include="style-button"></style>
    <style include="style-navs"></style>

    <style>
    .blockmain{
      position: relative;
      overflow: hidden;
      padding: 30px 0;
      background-color: #f1f1f1;
      min-height: 400px;
      margin-bottom: 50px;
    }

    .row {
      box-sizing: border-box;
      margin: 0;
      min-height: 400px;
    }

    .title{
      margin: 10px 0;
      font-size: 24px;
      font-style: normal;
      color: #000;
      font-family: font-light;
      font-style: normal;
      font-weight: 300;
      letter-spacing: 0.75px;
    }
    .teacher {
      font-style: normal;
      font-size: 1.2vw;
      margin-top: 3px;
      padding-bottom: 21px;
    }

    .teacher .name {
      text-decoration: none;
    }
    .info {
      @apply(--layout-vertical);
      background-color: #fff;
      margin: 0px 0px;
      padding: 0 15px;
      box-sizing: border-box;
    }
    .media {
      padding: 0;
      box-sizing: border-box;
    }

    .media .video{
      background-color: black
    }

    .video {
        --video-style : {
            width:100% !important;
            height: 100% !important;
            position:absolute;
        };
    }

    .price {
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 36px;
      font-weight: 600;
    }
    .btn{
      width: 160px;
      padding: 14px 0;
      border-radius: 0;
      background-color: #09f;
      border-color: #09f;
    }

    .space{
      @apply(--layout-flex)
    }


    .numbers {
      display: flex;
      margin-top: 15px;
      font-size: 1.2vw;
      line-height: 1.3;
      font-weight: 400;
      text-transform: none;
      color: #000;
      @apply(--layout-justified)
    }

    .number .label {
      margin: 5px 0px;
      font-size: 16px;
    }

    .number .value {
      margin: 0 17px;
      font-size: 16px;
      text-align: center;
      font-family: font-bold;
    }

    .nav {
      display: flex;
      @apply(--layout-justified)
      margin-bottom: 0;
    }

    paper-dialog{
      --paper-dialog-background-color:#f1f1f1;
    }
    /*
    .nav-tabs .nav-item{
      margin: 0 10px;
      margin-bottom: 0;

    }*/

    </style>

    <layout-client>
      <div class="blockmain">     
        <div class="container">
          <div class="row">
            <div class="col-md-8 media">
              <deck-video class="video" video="{{data.video}}"></deck-video>          
            </div>
            <div class="col-md-4 info">
              <h2 class="title">{{data.course.title}}</h2>
              <div class="teacher">by <a class="name" href="/profile/{{data.course.teacher.id}}">{{data.course.teacher.fullname}}</a> 
              </div>
              <div >
                <h4 class="price">$ {{data.course.cost}}</h4> 
                <button class="btn btn-primary" on-click="on_try_buy">BUY</button>
              </div>

              <div class="space">
              </div>
              <div class="numbers">
                <div class="number">
                  <div class="value">{{data.course.language}}</div>
                  <div class="label">Language</div>
                </div>
                <div class="number">
                  <div class="value">{{data.course.students.length}}</div>
                  <div class="label">Students</div>
                </div>
                <div class="number">
                  <div class="value">{{data.course.lectures.length}}</div>
                  <div class="label">Lectures</div>
                </div> 
              </div>
            </div>
          </div>
        </div>

        <paper-dialog id="dialog">
          <page-payment data="{{data.course}}"></page-payment>
        </paper-dialog>
      </div>

      <div class="container">

        <x-tabs-nav tabs='["overview", "reviews", "lectures", "webinars", "document"]' current="{{current}}"></x-tabs-nav>

        <x-tabs id="tabs" current="{{current}}">
          <x-tab tab name="overview">
            <part-course-overview course="{{data.course}}"></part-course-overview>
            <part-course-other-course teacher="{{data.course.teacher_id}}"></part-course-other-course>
          </x-tab>
          <x-tab tab name="lectures">
            <part-course-lectures course="{{data.course}}" lectures="{{data.lectures}}"></part-course-lectures>
          </x-tab>
          <x-tab tab name="webinars">
            <part-course-webinars course="{{data.course}}" webinars="{{data.webinars}}"></part-course-webinars>        
          </x-tab>
          <x-tab tab name="document">
            <part-course-documents course="{{data.course}}"></part-course-documents>
          </x-tab>
          <x-tab tab name="reviews">
            <part-course-reviews course="{{data.course}}"></part-course-reviews>
          </x-tab>
        </x-tabs>
      </div>
        
    </layout-client>

  </template>
</dom-module>
<script>
  Polymer({

    is: 'page-course',

    properties: {
      data: {
        type: Object,
        value: function () { return {}; }
      }
    },

    on_try_buy:function(event){
      this.$.dialog.toggle();      
      // page(this.data.course.id + '/payment');
    }

  });
</script>