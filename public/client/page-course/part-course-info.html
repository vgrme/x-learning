<link rel="import" href="../../components/api-model/api-model.html">

<dom-module id="part-course-info">
  <template>
    <style include="style-panel"></style>

    <api-model-find id="find" collection="courses" on-response="on_response"response="{{courses}}"></api-model-find>
    <div class="panel">
      <div>
        <h4>$: {{data.course.cost}}</h4> 
         
        <h4>Language: {{data.course.language}}</h4>
     
        <h4>Followers: {{students}}</h4>
    
        <h4>Lectures: {{lectures}}</h4>
     
        <h4>Teacher: {{teacher.name}}</h4>
      </div>
    </div>
  </template>
</dom-module>

<script>
  Polymer({

    is: 'part-course-info',

    properties: {
      students:{
        type:Number
      },
      lectures:{
        type:Number
      },
      teacher:{
        type:String
      }
    },

    attached:function (event) {
      this.$.find.where={"id" : this.data.course.id};
      this.$.find.include.push("students");
      this.$.find.include.push("teacher");
      this.$.find.send();
    },

    on_response:function(event){
      this.teacher = this.courses[0].teacher
      this.students=this.courses[0].students.length;
      this.lectures=this.data.lectures.length;
    }

  });
</script>