<link rel="import" href="../../components/api-user/api-user.html">
<link rel="import" href="../../styles/style-grid/style-grid.html">
<link rel="import" href="../deck-p2p-admin/deck-p2p-admin.html">
<link rel="import" href="../layout-admin/layout-admin.html">

<dom-module id="part-webinar-video">
  <template>
    <style include="style-grid"></style>

    <api-model-update id="update" collection="webinars" model-id="{{data.webinar.id}}"
      data="{{data.webinar}}" response="{{response}}" error="{{error}}">
    </api-model-update>
    
    <layout-admin>

     <div class="toolbar">
        <h1>Webinars: {{data.webinar.title}}</h1>
      </div>
      <div class="main container">
        <div class="row">
          <div class="col col-sm-3">
          </div>
          <div class="col col-sm-6">
           <deck-p2p-admin data="{{data.webinar}}" on-peer="on_peer" on-webinar-closed="webinar_closed"></deck-p2p-admin>
          </div>
          <div class="col col-sm-3">
          </div>
        </div>
    </layout-admin>
    
  </template>
</dom-module>
<script>
  Polymer({

    is: 'part-webinar-video',

    on_peer: function(event){
      this.data.webinar.peer_id=event.detail;
      this.$.update.send();
    },

    webinar_closed: function(){
      this.data.webinar.state="offline"
      this.$.update.send();
    }

  });
</script>